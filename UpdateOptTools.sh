#!/bin/bash

echo "Starting Installer/Updater"
baseFolder="/opt/useful/"
/usr/bin/mkdir -p $baseFolder

# https://askubuntu.com/questions/15853/how-can-a-script-check-if-its-being-run-as-root#:~:text=You%20can%20accomplish%20this%20by,be%20root%20to%20do%20this.
echo "Checking root privileges..."
if [ `whoami` != 'root' ]
  then 
    echo "You must be root to do this."
  exit
fi

InstallGitRepo() {
  url_without_suffix="${1%.*}"
  base="$(basename "${url_without_suffix}")"
  repoParentFolder="$baseFolder$2"

  echo "Processing $base in $repoParentFolder"
  /usr/bin/mkdir -p $repoParentFolder
  cd $repoParentFolder
  /usr/bin/git ls-remote $1 -q
  if [ $? != 0 ]
    then
      echo "Remote endpoint $1 for $base not found"
      exit
  fi
  if [ -d "$repoParentFolder$base" ]
    then
      echo "Updating..."
      cd "$repoParentFolder$base"
      /usr/bin/git pull --ff --rebase=false 
    else
      echo "Cloning..."
      /usr/bin/git clone $1
  fi
}


# ############################################################
# ## This tool install the git repos I find most useful     ##
# ############################################################

# Security Lists
InstallGitRepo "https://github.com/danielmiessler/SecLists.git" "lists/"

# Documentation
InstallGitRepo "https://github.com/swisskyrepo/PayloadsAllTheThings.git" "docs/"
InstallGitRepo "https://github.com/carlospolop/hacktricks" "docs/"

# Cracking Tools
InstallGitRepo "https://github.com/ZerBea/hcxtools.git" "tools/cracking/"

# Privilage Escalation Tools
InstallGitRepo "https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite.git" "tools/escalation/"
InstallGitRepo "https://github.com/rebootuser/LinEnum" "tools/escalation/"

